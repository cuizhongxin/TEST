<!--pages/secretRealm/secretRealm.wxml-->
<view class="page-container">
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <view class="top-nav">
    <view class="realm-tabs">
      <view class="tab-item {{currentRealmIndex === index ? 'active' : ''}} {{playerLevel < item.minLevel ? 'locked' : ''}}"
            wx:for="{{realms}}" wx:key="id"
            data-index="{{index}}"
            bindtap="switchRealm">
        <text>{{item.name}}</text>
        <text class="lock-icon" wx:if="{{playerLevel < item.minLevel}}">ğŸ”’</text>
      </view>
    </view>
    <view class="back-btn" bindtap="goBack">è¿”å›</view>
  </view>

  <!-- ä¸»å†…å®¹åŒº -->
  <view class="main-content">
    <!-- å·¦ä¾§é¢æ¿ -->
    <view class="left-panel">
      <!-- å¥–åŠ±ç‰©å“ç½‘æ ¼ -->
      <view class="rewards-section">
        <scroll-view class="rewards-scroll" scroll-y>
          <view class="rewards-grid">
            <view class="reward-item {{item.quality}}" wx:for="{{currentRealm.rewards}}" wx:key="id" wx:if="{{currentRealm}}">
              <view class="item-icon-wrap {{item.quality}}">
                <text class="item-icon">{{item.icon}}</text>
              </view>
              <text class="item-name {{item.quality}}">{{item.name}}</text>
            </view>
          </view>
        </scroll-view>
      </view>

      <!-- ç§˜å¢ƒæè¿° -->
      <view class="realm-description" wx:if="{{currentRealm}}">
        <text class="realm-name">{{currentRealm.name}}</text>
        <text class="realm-desc">{{currentRealm.description}}</text>
      </view>

      <!-- æ¢é™©æŒ‰é’® - ç¼©å°ç‰ˆ -->
      <view class="explore-buttons" wx:if="{{currentRealm}}">
        <view class="explore-btn" bindtap="explore" data-count="1">
          <text class="btn-title">æ¢é™©1æ¬¡</text>
          <view class="btn-cost">
            <text class="cost-icon">ğŸª™</text>
            <text class="cost-value">{{currentRealm.costGold}}</text>
          </view>
        </view>
        <view class="explore-btn" bindtap="explore" data-count="10">
          <text class="btn-title">æ¢é™©10æ¬¡</text>
          <view class="btn-cost">
            <text class="cost-icon">ğŸª™</text>
            <text class="cost-value">{{currentRealm.costGold * 9.5}}</text>
          </view>
        </view>
        <view class="explore-btn" bindtap="explore" data-count="50">
          <text class="btn-title">æ¢é™©50æ¬¡</text>
          <view class="btn-cost">
            <text class="cost-icon">ğŸª™</text>
            <text class="cost-value">{{currentRealm.costGold * 45}}</text>
          </view>
        </view>
      </view>

      <!-- åº•éƒ¨çŠ¶æ€ -->
      <view class="status-bar">
        <view class="status-item">
          <text class="status-label">é»„é‡‘</text>
          <text class="status-value gold">{{userGold}}</text>
        </view>
        <view class="status-item">
          <text class="status-label">ä»“åº“å®¹é‡</text>
          <text class="status-value">{{warehouseUsed}}/{{warehouseMax}}</text>
        </view>
      </view>
    </view>

    <!-- å³ä¾§é¢æ¿ -->
    <view class="right-panel">
      <!-- æ¢é™©çºªå½• -->
      <view class="records-section">
        <view class="section-header">æ¢é™©çºªå½•</view>
        <scroll-view class="records-list" scroll-y>
          <view class="record-item {{item.quality}}" wx:for="{{explorationRecords}}" wx:key="name">
            <text class="record-name">ã€{{item.name}}ã€‘</text>
            <text class="record-count">x{{item.count}}</text>
          </view>
          <view class="empty-records" wx:if="{{explorationRecords.length === 0}}">
            <text>æš‚æ— æ¢é™©è®°å½•</text>
          </view>
        </scroll-view>
      </view>

      <!-- ä¸­å¥–å…¬å‘Š -->
      <view class="announcement-section">
        <view class="section-header">ä¸­å¥–å…¬å‘Š</view>
        <scroll-view class="announcement-list" scroll-y>
          <view class="announcement-item" wx:for="{{announcements}}" wx:key="index">
            <text>{{item.player}} è·å¾— </text>
            <text class="{{item.quality}}">{{item.itemName}}</text>
          </view>
        </scroll-view>
      </view>
    </view>
  </view>

  <!-- æ¢é™©ç»“æœå¼¹çª— -->
  <view class="modal-mask" wx:if="{{showResultModal}}" catchtap="closeResultModal">
    <view class="result-modal" catchtap="">
      <view class="result-header">ğŸ‰ æ¢é™©ç»“æœ</view>
      <scroll-view class="result-list" scroll-y>
        <view class="result-item {{item.quality}}" wx:for="{{resultItems}}" wx:key="name">
          <text class="result-icon">{{item.icon}}</text>
          <text class="result-name {{item.quality}}">{{item.name}}</text>
          <text class="result-count">x{{item.count}}</text>
        </view>
      </scroll-view>
      <view class="result-footer">
        <button class="confirm-btn" bindtap="closeResultModal">ç¡®å®š</button>
      </view>
    </view>
  </view>
</view>
