<!--pages/recruit/recruit.wxml-->
<view class="page-container">
  <!-- é¡¶éƒ¨æ  -->
  <view class="top-bar">
    <view class="back-btn" bindtap="goBack">â—€ è¿”å›</view>
    <view class="page-title">ğŸº é…’é¦†æ‹›è´¤</view>
    <view class="resource-info">
      <text class="gold">ğŸª™ {{gold}}</text>
      <text class="silver">ğŸ¥ˆ {{silver}}</text>
    </view>
  </view>
  
  <!-- ä¸»å†…å®¹ -->
  <view class="main-content">
    <!-- å·¦ä¾§ï¼šæ‹›è´¤ä»¤ -->
    <view class="token-panel">
      <view class="panel-title">ğŸ“œ æ‹›è´¤ä»¤</view>
      <view class="token-list">
        <view class="token-item green">
          <text class="token-name">åˆçº§æ‹›è´¤ä»¤</text>
          <text class="token-count">{{juniorToken}}</text>
          <view class="token-actions">
            <view class="btn-small" bindtap="claimDaily" wx:if="{{!dailyClaimed}}">æ¯æ—¥é¢†å–</view>
            <view class="btn-small" bindtap="buyToken" data-type="junior">è´­ä¹°(1ä¸‡é“¶)</view>
          </view>
        </view>
        <view class="token-item blue">
          <text class="token-name">ä¸­çº§æ‹›è´¤ä»¤</text>
          <text class="token-count">{{intermediateToken}}</text>
          <view class="token-actions">
            <view class="btn-small" bindtap="buyToken" data-type="intermediate">è´­ä¹°(15é‡‘)</view>
          </view>
        </view>
        <view class="token-item purple">
          <text class="token-name">é«˜çº§æ‹›è´¤ä»¤</text>
          <text class="token-count">{{seniorToken}}</text>
          <view class="token-actions">
            <view class="btn-small" bindtap="buyToken" data-type="senior">è´­ä¹°(200é‡‘)</view>
          </view>
        </view>
      </view>
      
      <!-- åˆæˆ -->
      <view class="compose-section">
        <view class="compose-item" bindtap="composeToken" data-from="junior">
          15åˆçº§ + 5000é“¶ â†’ 1é«˜çº§
        </view>
        <view class="compose-item" bindtap="composeToken" data-from="intermediate">
          15ä¸­çº§ + 5é‡‘ â†’ 1é«˜çº§
        </view>
      </view>
    </view>
    
    <!-- ä¸­é—´ï¼šæ‹›å‹ŸåŒº -->
    <view class="recruit-panel">
      <view class="recruit-cards">
        <view class="recruit-card green" bindtap="recruit" data-type="JUNIOR" data-count="1">
          <text class="card-icon">ğŸ“œ</text>
          <text class="card-title">åˆçº§æ‹›å‹Ÿ</text>
          <text class="card-desc">ç»¿è‰²70% | ç™½è‰²30%</text>
          <view class="card-btn">å•æŠ½x1</view>
        </view>
        
        <view class="recruit-card blue" bindtap="recruit" data-type="INTERMEDIATE" data-count="1">
          <text class="card-icon">ğŸ“œ</text>
          <text class="card-title">ä¸­çº§æ‹›å‹Ÿ</text>
          <text class="card-desc">è“è‰²50% | çº¢è‰²50%</text>
          <text class="card-trait">çº¢è‰²å°†é¢†å¸¦1é¡¹ç‰¹å¾</text>
          <view class="card-btn">å•æŠ½x1</view>
        </view>
        
        <view class="recruit-card purple" bindtap="recruit" data-type="SENIOR" data-count="1">
          <text class="card-icon">ğŸ“œ</text>
          <text class="card-title">é«˜çº§æ‹›å‹Ÿ</text>
          <text class="card-desc">ç´«è‰²90% | æ©™è‰²10%</text>
          <text class="card-trait">æ©™è‰²å°†é¢†å¸¦2é¡¹ç‰¹å¾</text>
          <view class="card-btn">å•æŠ½x1</view>
        </view>
      </view>
      
      <!-- åè¿æŠ½ -->
      <view class="ten-pull">
        <view class="ten-btn green" bindtap="recruit" data-type="JUNIOR" data-count="10">åˆçº§åè¿</view>
        <view class="ten-btn blue" bindtap="recruit" data-type="INTERMEDIATE" data-count="10">ä¸­çº§åè¿</view>
        <view class="ten-btn purple" bindtap="recruit" data-type="SENIOR" data-count="10">é«˜çº§åè¿</view>
      </view>
    </view>
    
    <!-- å³ä¾§ï¼šæ‹›å‹Ÿç»“æœ -->
    <view class="result-panel">
      <view class="panel-title">ğŸ‰ æ‹›å‹Ÿç»“æœ</view>
      <scroll-view class="result-list" scroll-y wx:if="{{recruitedGenerals.length > 0}}">
        <view class="result-item {{item.quality.name === 'æ©™è‰²' ? 'orange' : item.quality.name === 'ç´«è‰²' ? 'purple' : item.quality.name === 'çº¢è‰²' ? 'red' : item.quality.name === 'è“è‰²' ? 'blue' : item.quality.name === 'ç»¿è‰²' ? 'green' : 'white'}}" 
              wx:for="{{recruitedGenerals}}" wx:key="id">
          <view class="general-basic">
            <text class="general-icon">{{item.quality.icon}}</text>
            <view class="general-info">
              <text class="general-name" style="color: {{item.quality.color}}">{{item.name}}</text>
              <text class="general-faction">{{item.faction}} Â· {{item.type.name}}</text>
            </view>
          </view>
          <view class="general-traits" wx:if="{{item.traits && item.traits.length > 0}}">
            <text class="trait-item" wx:for="{{item.traits}}" wx:key="*this" wx:for-item="trait">{{trait}}</text>
          </view>
          <view class="general-attrs">
            <text>æ”»{{item.attributes.attack}}</text>
            <text>é˜²{{item.attributes.defense}}</text>
            <text>å‹‡{{item.attributes.valor}}</text>
            <text>ç»Ÿ{{item.attributes.command}}</text>
          </view>
        </view>
      </scroll-view>
      <view class="empty-result" wx:else>
        <text>æš‚æ— æ‹›å‹Ÿè®°å½•</text>
        <text class="hint">ä½¿ç”¨æ‹›è´¤ä»¤å¼€å§‹æ‹›å‹Ÿå§ï¼</text>
      </view>
    </view>
  </view>
</view>
