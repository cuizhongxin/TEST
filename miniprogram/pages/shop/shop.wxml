<!--pages/shop/shop.wxml-->
<view class="page-container">
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <view class="top-nav">
    <view class="nav-tabs">
      <view class="tab-item {{currentTab === 'enhance' ? 'active' : ''}}" bindtap="switchTab" data-tab="enhance">å¼ºåŒ–ææ–™</view>
      <view class="tab-item {{currentTab === 'recruit' ? 'active' : ''}}" bindtap="switchTab" data-tab="recruit">æ‹›è´¤ä»¤</view>
      <view class="tab-item {{currentTab === 'resource' ? 'active' : ''}}" bindtap="switchTab" data-tab="resource">èµ„æºåŒ…</view>
      <view class="tab-item {{currentTab === 'consumable' ? 'active' : ''}}" bindtap="switchTab" data-tab="consumable">æ¶ˆè€—å“</view>
      <view class="tab-item {{currentTab === 'special' ? 'active' : ''}}" bindtap="switchTab" data-tab="special">ç‰¹æ®Šé“å…·</view>
    </view>
    <view class="user-gold">
      <text class="gold-icon">ğŸª™</text>
      <text class="gold-value">{{userGold}}</text>
    </view>
    <view class="back-btn" bindtap="goBack">è¿”å›</view>
  </view>

  <!-- å•†å“åˆ—è¡¨ -->
  <scroll-view class="shop-content" scroll-y>
    <view class="goods-grid">
      <view class="goods-item {{item.quality}}" wx:for="{{currentGoods}}" wx:key="id" bindtap="buyItem" data-id="{{item.id}}">
        <view class="goods-icon-wrap {{item.quality}}">
          <text class="goods-icon">{{item.icon}}</text>
        </view>
        <view class="goods-info">
          <text class="goods-name {{item.quality}}">{{item.name}}</text>
          <text class="goods-desc">{{item.desc}}</text>
        </view>
        <view class="goods-price">
          <text class="price-icon">ğŸª™</text>
          <text class="price-value">{{item.price}}</text>
        </view>
        <view class="goods-stock" wx:if="{{item.dailyLimit}}">
          <text>ä»Šæ—¥: {{item.bought || 0}}/{{item.dailyLimit}}</text>
        </view>
      </view>
    </view>
  </scroll-view>

  <!-- å¼ºåŒ–è¯´æ˜ï¼ˆå¼ºåŒ–ææ–™é¡µæ˜¾ç¤ºï¼‰ -->
  <view class="enhance-info" wx:if="{{currentTab === 'enhance'}}">
    <view class="info-title">âš”ï¸ å¼ºåŒ–æ•ˆæœè¯´æ˜</view>
    <view class="info-content">
      <text>+4: æœºåŠ¨æ€§+1</text>
      <text>+6: æœºåŠ¨æ€§+2</text>
      <text>+8: æœºåŠ¨æ€§+4</text>
      <text>+10: æœºåŠ¨æ€§+8ï¼Œå±æ€§ç¿»å€</text>
    </view>
  </view>

  <!-- è´­ä¹°å¼¹çª— -->
  <view class="modal-mask" wx:if="{{showBuyModal}}" catchtap="closeBuyModal">
    <view class="buy-modal" catchtap="">
      <view class="modal-header">è´­ä¹°å•†å“</view>
      <view class="modal-body">
        <view class="buy-item-info">
          <text class="buy-icon">{{selectedItem.icon}}</text>
          <text class="buy-name {{selectedItem.quality}}">{{selectedItem.name}}</text>
        </view>
        <view class="buy-count">
          <text class="count-label">è´­ä¹°æ•°é‡:</text>
          <view class="count-control">
            <view class="count-btn" bindtap="decreaseCount">-</view>
            <text class="count-value">{{buyCount}}</text>
            <view class="count-btn" bindtap="increaseCount">+</view>
          </view>
        </view>
        <view class="buy-total">
          <text>æ€»ä»·: </text>
          <text class="total-gold">ğŸª™ {{selectedItem.price * buyCount}}</text>
        </view>
      </view>
      <view class="modal-footer">
        <button class="cancel-btn" bindtap="closeBuyModal">å–æ¶ˆ</button>
        <button class="confirm-btn" bindtap="confirmBuy">ç¡®è®¤è´­ä¹°</button>
      </view>
    </view>
  </view>
</view>


