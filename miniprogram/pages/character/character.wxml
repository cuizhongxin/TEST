<!--pages/character/character.wxml-->
<view class="page-container">
  <view class="top-bar">
    <view class="back-btn" bindtap="goBack">◀ 返回</view>
    <view class="page-title">武将列表</view>
    <view class="count">{{generals.length}}位武将</view>
  </view>
  
  <view class="main-content">
    <!-- 武将列表 -->
    <scroll-view class="general-list" scroll-y>
      <view class="general-card {{selectedGeneral && selectedGeneral.id === item.id ? 'selected' : ''}}"
            wx:for="{{generals}}" wx:key="id"
            data-id="{{item.id}}"
            bindtap="selectGeneral">
        <view class="card-avatar" style="border-color: {{item.quality.color}}">
          <image src="{{item.avatar}}" mode="aspectFill"></image>
        </view>
        <view class="card-info">
          <text class="card-name" style="color: {{item.quality.color}}">{{item.name}}</text>
          <text class="card-quality">{{item.quality.name}}</text>
        </view>
        <text class="card-power">{{item.attributes.power}}</text>
      </view>
    </scroll-view>
    
    <!-- 详情 -->
    <view class="detail-panel" wx:if="{{selectedGeneral}}">
      <view class="detail-header">
        <view class="detail-avatar" style="border-color: {{selectedGeneral.quality.color}}">
          <image src="{{selectedGeneral.avatar}}" mode="aspectFill"></image>
        </view>
        <view class="detail-title">
          <text class="detail-name" style="color: {{selectedGeneral.quality.color}}">{{selectedGeneral.name}}</text>
          <text class="detail-type">{{selectedGeneral.type.name}}</text>
        </view>
      </view>
      
      <view class="attributes">
        <view class="attr-item">
          <text class="attr-label">攻击力</text>
          <text class="attr-value">{{selectedGeneral.attributes.attack}}</text>
        </view>
        <view class="attr-item">
          <text class="attr-label">防御力</text>
          <text class="attr-value">{{selectedGeneral.attributes.defense}}</text>
        </view>
        <view class="attr-item">
          <text class="attr-label">武勇</text>
          <text class="attr-value">{{selectedGeneral.attributes.valor}}</text>
        </view>
        <view class="attr-item">
          <text class="attr-label">统御</text>
          <text class="attr-value">{{selectedGeneral.attributes.command}}</text>
        </view>
        <view class="attr-item">
          <text class="attr-label">闪避</text>
          <text class="attr-value">{{selectedGeneral.attributes.dodge}}%</text>
        </view>
        <view class="attr-item">
          <text class="attr-label">机动</text>
          <text class="attr-value">{{selectedGeneral.attributes.mobility}}</text>
        </view>
      </view>
      
      <view class="total-power">
        <text>总战力: </text>
        <text class="power-value">{{selectedGeneral.attributes.power}}</text>
      </view>
    </view>
  </view>
</view>
